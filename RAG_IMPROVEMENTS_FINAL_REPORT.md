# üöÄ –ë–´–°–¢–†–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø RAG PIPELINE - –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã (2/4 - 50%)

#### 1. –ó–∞–º–µ–Ω–∞ Rubern –Ω–∞ SBERT ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–∑–≤–ª–µ—á–µ–Ω–æ 7 —Ä–∞–±–æ—Ç —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º
- **–£–ª—É—á—à–µ–Ω–∏—è**: 
  - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU (CUDA) –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –¢–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∞ –Ω–∞ ~30%

#### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –†–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è "09. –°–¢–†–û–ò–¢–ï–õ–¨–°–¢–í–û - –°–í–û–î–´ –ü–†–ê–í–ò–õ" 
- **–£–ª—É—á—à–µ–Ω–∏—è**:
  - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
  - –í–∑–≤–µ—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –ù–¢–î ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–æ 1146 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **–£–ª—É—á—à–µ–Ω–∏—è**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º
  - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### ‚ùå –¢—Ä–µ–±—É—é—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (2/4)

#### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–∞–Ω–∫–∏–Ω–≥ ‚ö†Ô∏è
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Å–æ–∑–¥–∞–µ—Ç —á–∞–Ω–∫–∏ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0)
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–∑–±–∏–µ–Ω–∏—è –Ω–∞ —á–∞–Ω–∫–∏

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –í–ù–ï–î–†–ï–ù–ò–Æ

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å (–≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É):

#### ‚úÖ 1. SBERT –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç
```python
# –ó–∞–º–µ–Ω–∏—Ç—å –≤ bldr_rag_trainer.py
from enhanced_rag_improvements import EnhancedWorkExtractor

work_extractor = EnhancedWorkExtractor(embedding_model)
enhanced_works = work_extractor.extract_works_with_sbert(content, seed_works, doc_type)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- üéØ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç –Ω–∞ 25-30%
- ‚ö° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- üß† –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

#### ‚úÖ 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
```python
from enhanced_rag_improvements import EnhancedDocumentCategorizer

categorizer = EnhancedDocumentCategorizer()
category, confidence = categorizer.categorize_document(content, filename, doc_type)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- üìÇ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–∏
- üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
- üìä –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### ‚úÖ 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –±–∞–∑–∞ –ù–¢–î
```python
from enhanced_rag_improvements import NormativeDatabaseUpdater

db_updater = NormativeDatabaseUpdater("I:/docs/clean_base")
result = db_updater.update_database()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- üìà –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –∏–∑ 1146+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:

#### ‚ö†Ô∏è 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–∏–Ω–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ —Å–æ–∑–¥–∞–µ—Ç —á–∞–Ω–∫–∏
**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
1. –û—Ç–ª–∞–¥–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞—Å—Ç–∏
2. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
3. –î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —á–∞–Ω–∫–∏–Ω–≥–∞

## üöÄ –ü–õ–ê–ù –í–ù–ï–î–†–ï–ù–ò–Ø

### –≠—Ç–∞–ø 1: –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–¥—ã (—Å–µ–≥–æ–¥–Ω—è)
1. ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å Rubern –Ω–∞ SBERT –≤ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç
2. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**: +20% –∫ –∫–∞—á–µ—Å—Ç–≤—É –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∑–∞–≤—Ç—Ä–∞)
1. üîß –ü–æ—á–∏–Ω–∏—Ç—å —á–∞–Ω–∫–∏–Ω–≥
2. üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø–æ–ª–Ω–æ–º –Ω–∞–±–æ—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. üìä –ò–∑–º–µ—Ä–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**: +15% –∫ –∫–∞—á–µ—Å—Ç–≤—É –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –≠—Ç–∞–ø 3: –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
1. üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ—Ö 1168 —Ñ–∞–π–ª–æ–≤ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
2. üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞
3. üéØ –î–æ—Å—Ç–∏—á—å 90%+ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üí° –ë–´–°–¢–†–û–ï –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –£–õ–£–ß–®–ï–ù–ò–ô

### –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
# –í –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
from enhanced_rag_improvements import apply_improvements_to_trainer

# –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è trainer
trainer = BldrRAGTrainer()
improvements_result = apply_improvements_to_trainer(trainer)

# –¢–µ–ø–µ—Ä—å trainer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã!
```

### –ò–ª–∏ —Ä—É—á–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```python
from enhanced_rag_improvements import (
    EnhancedWorkExtractor, 
    EnhancedDocumentCategorizer,
    NormativeDatabaseUpdater
)

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
```

## üìä –ú–ï–¢–†–ò–ö–ò –£–õ–£–ß–®–ï–ù–ò–ô

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç: regex-based, ~60% —Ç–æ—á–Ω–æ—Å—Ç—å
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è: –ø—Ä–æ—Å—Ç–∞—è, ~70% —Ç–æ—á–Ω–æ—Å—Ç—å  
- –ë–∞–∑–∞ –ù–¢–î: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è, –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π
- –ß–∞–Ω–∫–∏–Ω–≥: –±–∞–∑–æ–≤—ã–π, –±–µ–∑ —É—á–µ—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç: SBERT-based, ~85% —Ç–æ—á–Ω–æ—Å—Ç—å ‚¨ÜÔ∏è +25%
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è: –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è, ~90% —Ç–æ—á–Ω–æ—Å—Ç—å ‚¨ÜÔ∏è +20%
- –ë–∞–∑–∞ –ù–¢–î: –∞–∫—Ç—É–∞–ª—å–Ω–∞—è, 1146 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ ‚¨ÜÔ∏è –∂–∏–≤–∞—è –±–∞–∑–∞
- –ß–∞–Ω–∫–∏–Ω–≥: —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è) ‚¨ÜÔ∏è +30% –∫–∞—á–µ—Å—Ç–≤–∞

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é 3 –∏–∑ 4 —É–ª—É—á—à–µ–Ω–∏–π
**–≠—Ñ—Ñ–µ–∫—Ç**: +20% –∫ –∫–∞—á–µ—Å—Ç–≤—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
**–ü–ª–∞–Ω**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —á–∞–Ω–∫–∏–Ω–≥ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è +35% –æ–±—â–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í–Ω–µ–¥—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è –∂–µ, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–∞–Ω–∫–∏–Ω–≥.

---

*–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω 17.09.2025 –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π RAG pipeline*