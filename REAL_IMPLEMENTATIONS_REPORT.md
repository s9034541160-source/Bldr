# üéâ –û–¢–ß–ï–¢: –†–ï–ê–õ–¨–ù–´–ï –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –í–ú–ï–°–¢–û –ú–û–ö–û–í

**–î–∞—Ç–∞:** 21 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–∏–ª–ª–∏–∞—Ä–¥—ã –µ–±—É—á–∏—Ö –º–æ–∫–æ–≤—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –≤–µ–∑–¥–µ  
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –†–ï–ê–õ–¨–ù–´–ï —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏  

## üö´ –£–ë–†–ê–ù–ù–´–ï –ú–û–ö–ò

### 1. AI Chat Endpoint (`/api/ai/chat`)
**–ë–´–õ–û:** Mock –æ—Ç–≤–µ—Ç—ã —Ç–∏–ø–∞ "–≠—Ç–æ –º–æ–∫-–æ—Ç–≤–µ—Ç –æ—Ç AI —Å–∏—Å—Ç–µ–º—ã"  
**–°–¢–ê–õ–û:** 
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `Coordinator` –∏–∑ `core.coordinator`  
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π `ModelManager` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–µ–ª—è–º–∏  
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞—Å—Ç–æ—è—â–∏–º `trainer` –∏ `tools_system`  
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≥–æ–ª–æ—Å–∞, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π `process_request()` —á–µ—Ä–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä  

### 2. AI Command Endpoint (`/ai`)
**–ë–´–õ–û:** Mock task_id –∏ —Å–æ–æ–±—â–µ–Ω–∏—è "–ì–µ–Ω–µ—Ä–∏—Ä—É—é —Ç–µ–∑–∏—Å—ã –¥–ª—è..."  
**–°–¢–ê–õ–û:**
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `Coordinator.process_request()`  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ task_id –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è  
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ —Ñ–µ–π–∫–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤  

### 3. RAG Search Endpoint (`/api/rag/search`)
**–ë–´–õ–û:** Mock —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å "message": f"Mock RAG search for: {query}"  
**–°–¢–ê–õ–û:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π `trainer.query()` —Å FAISS –∏–Ω–¥–µ–∫—Å–æ–º  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ score –∏ metadata –∏–∑ –∏–Ω–¥–µ–∫—Å–∞  
- ‚úÖ –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏  

### 4. RAG Status Endpoint (`/api/rag/status`)
**–ë–´–õ–û:** –§–µ–π–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: `"total_documents": 0, "total_chunks": 0`  
**–°–¢–ê–õ–û:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã trainer: `total_documents`, `total_chunks`  
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è FAISS –∏–Ω–¥–µ–∫—Å–∞  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π —Å—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è: `is_training`, `progress`  
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏–Ω–¥–µ–∫—Å–∞: `has_index`  

### 5. RAG Training Endpoint (`/api/rag/train`)
**–ë–´–õ–û:** –§–µ–π–∫–æ–≤—ã–π task_id –∏ "Training started successfully"  
**–°–¢–ê–õ–û:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ `trainer.train()` –≤ background thread  
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –æ–±—É—á–µ–Ω–∏—è  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `custom_dir`, `force_retrain`  
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—É—á–µ–Ω–∏—è  

### 6. Database Endpoint (`/db`)
**–ë–´–õ–û:** `{"cypher": data.cypher, "records": [], "message": "Neo4j not available"}`  
**–°–¢–ê–õ–û:**
- ‚úÖ –ß–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ 501 "Neo4j database not configured"  
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞  
- ‚úÖ –ß–µ—Ç–∫–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —á—Ç–æ –Ω—É–∂–Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∞—è –ë–î  

### 7. Metrics Endpoint (`/metrics-json`)
**–ë–´–õ–û:** –§–µ–π–∫–æ–≤—ã–µ –Ω—É–ª–∏: `{"total_chunks": 0, "avg_ndcg": 0.0}`  
**–°–¢–ê–õ–û:**
- ‚úÖ –ß–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ 501 "Metrics system not implemented"  
- ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  

### 8. File Scanning (`/files-scan`)
**–ë–´–õ–û:** `{"scanned": 0, "copied": 0, "message": "File scan placeholder"}`  
**–°–¢–ê–õ–û:**
- ‚úÖ –ß–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ 501 "File scanning not implemented"  
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è  

## üîß –†–ï–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### Coordinator Integration
```python
# –†–ï–ê–õ–¨–ù–ê–Ø –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞
from core.coordinator import Coordinator
from core.model_manager import ModelManager

model_manager = ModelManager()
tools_system = getattr(trainer_instance, 'tools_system', None)
coordinator_instance = Coordinator(
    model_manager=model_manager,
    tools_system=tools_system,
    rag_system=trainer_instance
)

# –†–ï–ê–õ–¨–ù–ê–Ø –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
response_text = coordinator_instance.process_request(message)
```

### RAG System Integration  
```python
# –†–ï–ê–õ–¨–ù–´–ô –ø–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
results = trainer.query(query, k=k)
processing_time = time.time() - start_time

# –†–ï–ê–õ–¨–ù–´–ï –¥–∞–Ω–Ω—ã–µ –∏–∑ FAISS –∏–Ω–¥–µ–∫—Å–∞
total_chunks = trainer.faiss_index.ntotal
has_index = trainer.faiss_index is not None
```

### Background Training
```python
# –†–ï–ê–õ–¨–ù–û–ï –æ–±—É—á–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
def run_training():
    if hasattr(trainer, 'train_with_params'):
        trainer.train_with_params(
            custom_dir=custom_dir,
            force_retrain=force_retrain,
            task_id=task_id
        )

future = loop.run_in_executor(executor, run_training)
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–û (–ú–û–ö–ò):
- ‚ùå –í—Å–µ endpoint'—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ —Ñ–µ–π–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ  
- ‚ùå Telegram –±–æ—Ç –ø–æ–ª—É—á–∞–ª mock –æ—Ç–≤–µ—Ç—ã  
- ‚ùå –ù–∏–∫–∞–∫–æ–π —Ä–µ–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ AI –∑–∞–ø—Ä–æ—Å–æ–≤  
- ‚ùå –§–∞–ª—å—à–∏–≤—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏  
- ‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∏  

### –ü–û–°–õ–ï (–†–ï–ê–õ–¨–ù–´–ï –°–ò–°–¢–ï–ú–´):
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π Coordinator –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã  
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π ModelManager —Ä–∞–±–æ—Ç–∞–µ—Ç —Å LM Studio  
- ‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π RAG –ø–æ–∏—Å–∫ –≤ FAISS –∏–Ω–¥–µ–∫—Å–µ  
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ tools_system –≤—ã–ø–æ–ª–Ω—è—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã  
- ‚úÖ –ß–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –¥–ª—è –Ω–µ–≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  

## üöÄ –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
python C:\Bldr\backend\main.py
# –ò–ª–∏ —á–µ—Ä–µ–∑ –±–∞—Ç–Ω–∏–∫:
C:\Bldr\start_backend.bat
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –†–ï–ê–õ–¨–ù–´–• —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π:
```bash
python C:\Bldr\test_backend_real.py
```

### 3. Telegram Bot:
```bash
python C:\Bldr\integrations\telegram_bot.py
```

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

–¢–µ–ø–µ—Ä—å –∫–æ–≥–¥–∞ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ Telegram –±–æ—Ç—É:
1. –ë–æ—Ç –≤—ã–∑–æ–≤–µ—Ç `/api/ai/chat` 
2. Endpoint –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –†–ï–ê–õ–¨–ù–´–ô Coordinator
3. Coordinator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π ModelManager 
4. ModelManager –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ LM Studio —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
5. Coordinator –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ tools_system
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–π –æ—Ç–≤–µ—Ç –æ—Ç AI —Å–∏—Å—Ç–µ–º—ã
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞

## üö´ –ù–ï–¢ –ë–û–õ–¨–®–ï –ú–û–ö–û–í!

**–í—Å–µ mock'–∏ —É–¥–∞–ª–µ–Ω—ã –∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞:**
- –†–µ–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
- –ù–∞—Å—Ç–æ—è—â–∏–µ AI –º–æ–¥–µ–ª–∏  
- –†–µ–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- –ù–∞—Å—Ç–æ—è—â–∏–π RAG –ø–æ–∏—Å–∫
- –ß–µ—Å—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –¥–ª—è –Ω–µ–≥–æ—Ç–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ò–¢–û–ì:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–π AI —Å–∏—Å—Ç–µ–º—ã –≤–º–µ—Å—Ç–æ —Ñ–µ–π–∫–æ–≤—ã—Ö –∑–∞–≥–ª—É—à–µ–∫!