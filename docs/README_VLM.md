# üöÄ ENTERPRISE RAG 3.0: Vision-Language Model (VLM) Support

## üìã –û–±–∑–æ—Ä

VLM –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, —Ñ–æ—Ä–º—É–ª –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ **–ß—Ç–æ —É–º–µ–µ—Ç VLM:**
- **–ê–Ω–∞–ª–∏–∑ PDF –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –≤—ã—Å–æ–∫–∏–º DPI
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
- **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–∞–∫–µ—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —Ç–∞–±–ª–∏—Ü –∏ —Å–ø–∏—Å–∫–æ–≤
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–≤—è–∑—å —Ç–∞–±–ª–∏—Ü —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å–µ–∫—Ü–∏—è–º–∏

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- **BLIP** –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **LayoutLMv3** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **OpenCV** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Tesseract** –¥–ª—è OCR
- **PDF2Image** –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ PDF

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
python install_vlm.py
```

### 2. **–†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
pip install -r requirements_vlm.txt
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```python
from vlm_processor import VLMProcessor

vlm = VLMProcessor()
if vlm.is_available():
    print("‚úÖ VLM ready!")
else:
    print("‚ùå VLM not available")
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### **–í RAG —Ç—Ä–µ–Ω–µ—Ä–µ:**
VLM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –¥–ª—è PDF —Ñ–∞–π–ª–æ–≤:

```python
# –í enterprise_rag_trainer_full.py
if self.vlm_available and self._current_file_path.endswith('.pdf'):
    vlm_analysis = self.vlm_processor.analyze_document_structure(self._current_file_path)
    vlm_tables = vlm_analysis.get('tables', [])
```

### **–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from vlm_processor import VLMProcessor

vlm = VLMProcessor()

# –ê–Ω–∞–ª–∏–∑ PDF –¥–æ–∫—É–º–µ–Ω—Ç–∞
analysis = vlm.analyze_document_structure("document.pdf")
tables = analysis['tables']

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
tables = vlm.extract_tables_from_pdf("document.pdf")
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã VLM

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:**
```json
{
    "tables": [
        {
            "page": 1,
            "position": [100, 200, 300, 150],
            "content": "–¢–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏...",
            "confidence": 0.85,
            "detection_method": "VLM_LAYOUT",
            "metadata": {
                "data_type": "TABLE",
                "structured": true,
                "vlm_processed": true
            }
        }
    ],
    "vlm_available": true,
    "analysis_method": "sbert_semantic_vlm"
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
- **CUDA** - –¥–ª—è NVIDIA GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **MPS** - –¥–ª—è Apple Silicon
- **CPU** - fallback —Ä–µ–∂–∏–º

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
# –í vlm_processor.py
vlm = VLMProcessor(device="cuda")  # –∏–ª–∏ "cpu", "mps", "auto"
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### **–°–∏—Å—Ç–µ–º–Ω—ã–µ:**
- Python 3.8+
- 8GB+ RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB+)
- GPU —Å 4GB+ VRAM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- PyTorch 2.0+
- Transformers 4.30+
- OpenCV 4.8+
- PDF2Image 1.16+
- Tesseract OCR

## üö® Troubleshooting

### **–ü—Ä–æ–±–ª–µ–º–∞: CUDA out of memory**
```python
# –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CPU
vlm = VLMProcessor(device="cpu")
```

### **–ü—Ä–æ–±–ª–µ–º–∞: Tesseract not found**
```bash
# Ubuntu/Debian
sudo apt-get install tesseract-ocr tesseract-ocr-rus

# Windows
# –°–∫–∞—á–∞–π—Ç–µ —Å https://github.com/UB-Mannheim/tesseract/wiki
```

### **–ü—Ä–æ–±–ª–µ–º–∞: PDF2Image fails**
```bash
# Ubuntu/Debian
sudo apt-get install poppler-utils

# Windows
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ poppler-utils
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–ë–µ–∑ VLM (Fallback):**
- –¢–æ–ª—å–∫–æ regex –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏—è
- –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### **–° VLM:**
- –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU
2. **–î–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏** - –æ—Ç–∫–ª—é—á–∏—Ç–µ VLM
3. **–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏** - –≤–∫–ª—é—á–∏—Ç–µ VLM + GPU
4. **–î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CPU fallback

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- **–§–æ—Ä–º—É–ª—ã** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- **–î–∏–∞–≥—Ä–∞–º–º—ã** - –∞–Ω–∞–ª–∏–∑ —Å—Ö–µ–º –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤  
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
