# Bldr Empire v2 - Запуск полной панели управления

## Структура проекта

```
web/bldr_dashboard/
├── src/
│   ├── components/
│   │   ├── ControlPanel.tsx      # Панель управления
│   │   ├── AIShell.tsx           # AI чат
│   │   ├── DBTools.tsx           # Инструменты БД
│   │   ├── BotControl.tsx        # Управление ботом
│   │   ├── FileManager.tsx       # Менеджер файлов
│   │   ├── Analytics.tsx         # Аналитика
│   │   ├── RAGModule.tsx         # RAG модуль
│   │   └── index.tsx             # Экспорт компонентов
│   ├── services/
│   │   └── api.ts                # Сервис API
│   ├── App.tsx                   # Главный компонент
│   ├── main.tsx                  # Точка входа
│   └── index.css                 # Стили
├── package.json                  # Зависимости и скрипты
├── tsconfig.json                 # Конфигурация TypeScript
├── vite.config.ts                # Конфигурация Vite
├── index.html                    # HTML шаблон
├── setup.bat                     # Скрипт установки
├── start.bat                     # Скрипт запуска
└── build.bat                     # Скрипт сборки
```

## Установка и запуск

### 1. Установка зависимостей

Вариант 1 - через скрипт:
```
cd web/bldr_dashboard
setup.bat
```

Вариант 2 - вручную:
```
cd web/bldr_dashboard
npm install
```

### 2. Запуск сервера разработки

Вариант 1 - через скрипт:
```
start.bat
```

Вариант 2 - вручную:
```
cd web/bldr_dashboard
npm run dev
```

### 3. Сборка для продакшена

Вариант 1 - через скрипт:
```
build.bat
```

Вариант 2 - вручную:
```
cd web/bldr_dashboard
npm run build
```

## Структура навигации

Панель управления имеет 7 вкладок:

1. **Control** - Основные команды системы
   - Кнопки для /train, /query, /ai, /db, /bot-send
   - Проверка состояния системы (/health)

2. **AI Shell** - Интерфейс для работы с AI
   - Чат с выбором ролей (coordinator, chief_engineer, analyst)
   - История разговора

3. **DB Tools** - Инструменты базы данных
   - Выполнение Cypher запросов
   - Таблица результатов

4. **Bot Control** - Управление Telegram ботом
   - Отправка команд
   - История команд

5. **File Manager** - Менеджер файлов
   - Сканирование путей
   - Статистика файлов

6. **Analytics** - Аналитика и метрики
   - Визуализация данных (Pie, Bar, Line charts)
   - Real-time логи этапов

7. **RAG Module** - Модуль RAG
   - Обучение, запросы, дашборд

## Тестирование функциональности

### Базовое тестирование

1. Откройте браузер по адресу `http://localhost:3000`
2. Перейдите на вкладку "Control"
3. Нажмите кнопку "/health" для проверки состояния системы
4. Перейдите на вкладку "AI Shell"
5. Выберите роль и отправьте тестовый запрос
6. Перейдите на вкладку "Analytics" для просмотра метрик

### Расширенное тестирование

1. Запустите обучение через вкладку "Control" или "RAG Module"
2. Наблюдайте за real-time обновлениями на вкладке "Analytics"
3. Выполните семантический запрос через вкладку "Control" или "RAG Module"
4. Проверьте работу с базой данных через вкладку "DB Tools"
5. Отправьте команду боту через вкладку "Bot Control"
6. Просканируйте файлы через вкладку "File Manager"

## Интеграция с backend

### Требуемые сервисы

1. **FastAPI сервер** (core/bldr_api.py)
   - Запуск: `python core/bldr_api.py`
   - Порт: 8000

2. **Neo4j** - графовая база данных
   - Требуется для /db эндпоинта

3. **Qdrant** - векторная база данных
   - Требуется для RAG функциональности

### Конфигурация

API настроен на работу с backend по адресу:
```
http://localhost:8000
```

CORS настроен для разрешения запросов с:
```
http://localhost:3000
```

WebSocket подключение:
```
ws://localhost:8000/ws
```

## Особенности реализации

### Responsive дизайн

Все компоненты адаптированы для работы на:
- Десктопах
- Планшетах
- Мобильных устройствах

### Real-time обновления

Analytics компонент использует WebSocket для:
- Отображения прогресса обучения
- Логов выполнения этапов
- Автоматического обновления метрик

### Обработка ошибок

Все компоненты включают:
- Обработку сетевых ошибок
- Отображение сообщений пользователю
- Graceful degradation при недоступности сервисов

### Кэширование

React Query используется для:
- Кэширования API ответов
- Автоматического обновления данных
- Оптимизации производительности

## Расширение функциональности

### Добавление новых вкладок

1. Создайте новый компонент в `src/components/`
2. Добавьте экспорт в `src/components/index.tsx`
3. Добавьте пункт в меню в `src/App.tsx`
4. Добавьте обработку в `renderContent()` в `src/App.tsx`

### Добавление новых API эндпоинтов

1. Добавьте интерфейсы в `src/services/api.ts`
2. Добавьте методы в `apiService` в `src/services/api.ts`
3. Используйте в компонентах через `apiService.имяМетода()`

## Устранение неполадок

### Частые проблемы

1. **"Network Error"** - проверьте запущен ли backend сервер
2. **"CORS Error"** - проверьте настройки CORS в backend
3. **"WebSocket connection failed"** - проверьте доступность WebSocket эндпоинта
4. **Пустые диаграммы** - проверьте доступность /metrics эндпоинта

### Логи и отладка

1. Откройте Developer Tools в браузере (F12)
2. Проверьте вкладку Console на наличие ошибок
3. Проверьте вкладку Network для анализа запросов
4. Проверьте вкладку WebSocket для анализа соединения